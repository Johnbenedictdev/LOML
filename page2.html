<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Letter 2 ‚ù§Ô∏è</title>
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Quicksand&display=swap" rel="stylesheet">
  <style>
    :root {
      --pink: #FFB6C1;
      --green: #ccffcc;
      --accent: #4a4a4a;
      --white: #ffffff;
    }

    body {
      margin: 0;
      padding: 0;
      font-family: 'Quicksand', sans-serif;
      background-color: var(--green);
      color: var(--accent);
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      overflow-x: hidden;
    }

    header {
      text-align: center;
      padding: 30px 20px;
      background-color: var(--pink);
      font-family: 'Pacifico', cursive;
      font-size: 2em;
      border-bottom: 5px solid var(--white);
      color: var(--accent);
    }

    .card {
      background-color: var(--white);
      margin: 20px auto;
      border-radius: 16px;
      max-width: 500px;
      box-shadow: 0 0 20px rgba(0,0,0,0.1);
      overflow: visible;
      padding-bottom: 20px;
      text-align: center;
      position: relative;
    }

    .music-video {
      width: 100%;
      height: auto;
      display: block;
      margin: 0 auto;
      border-top-left-radius: 16px;
      border-top-right-radius: 16px;
    }

    .media-container {
      width: 100%;
      background-color: #000;
      position: relative;
      min-height: 300px;
    }

    .media-container img,
    .media-container video {
      width: 100%;
      height: auto;
      max-height: 500px;
      object-fit: contain;
      display: none;
    }

    .media-container img.active,
    .media-container video.active {
      display: block;
    }

    .card-text {
      padding: 30px;
      font-size: 1.1em;
      line-height: 1.7;
      color: var(--accent);
    }

    footer {
      text-align: center;
      padding: 20px;
      background-color: var(--pink);
      color: var(--accent);
      font-size: 0.9em;
      margin-top: auto;
    }

    .letters-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 80px 40px;
      padding: 40px 20px;
      max-width: 1000px;
      margin: 0 auto 60px;
    }

    .letters-grid a img {
      width: 100%;
      max-width: 100px;
      height: auto;
      display: block;
      margin: 0 auto;
      transition: transform 0.3s;
    }

    .letters-grid a img:hover {
      transform: scale(1.1);
    }

    .joyce-wrapper {
      position: fixed;
      top: 50%;
      left: 10%;
      transform: translate(-50%, -50%) scale(1.8);
      z-index: 10;
      transition: transform 0.4s ease, top 0.4s ease, left 0.4s ease;
      pointer-events: none;
    }

    .joyce-wrapper img {
      max-width: 450px;
      height: auto;
    }

    .flower {
      position: absolute;
      width: 60px;
      height: 60px;
      background-image: url('images/pngflowers.png');
      background-size: contain;
      background-repeat: no-repeat;
      pointer-events: none;
      z-index: 2;
      animation: float 6s ease-in-out infinite;
    }

    @keyframes float {
      0% { transform: translate(0px, 0px); }
      50% { transform: translate(20px, -30px); }
      100% { transform: translate(-20px, 20px); }
    }

    .sound-control {
      position: absolute;
      top: 10px;
      right: 10px;
      background: rgba(0,0,0,0.7);
      color: white;
      border: none;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      font-size: 20px;
      cursor: pointer;
      z-index: 10;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s;
    }

    .sound-control:hover {
      background: rgba(0,0,0,0.9);
      transform: scale(1.1);
    }

    .music-info {
      position: absolute;
      bottom: 10px;
      left: 0;
      right: 0;
      background: rgba(0,0,0,0.7);
      color: white;
      padding: 5px 10px;
      font-size: 0.9em;
      z-index: 2;
    }

    .progress-bar {
      height: 3px;
      background: rgba(255,255,255,0.3);
      width: 100%;
      margin-top: 5px;
      position: relative;
    }

    .progress {
      height: 100%;
      background: var(--pink);
      width: 0%;
      transition: width 0.1s linear;
    }

    @media (max-width: 768px) {
      .joyce-wrapper {
        transform: translate(-50%, -50%) scale(0.7);
      }

      .joyce-wrapper img {
        max-width: 250px;
      }

      .flower {
        width: 30px;
        height: 30px;
      }
      
      .media-container {
        min-height: 200px;
      }
    }
  </style>
</head>
<body>

<header>Letter 2</header>

<div class="joyce-wrapper" id="joyce">
  <img src="images/kimo.png" alt="Kareem Floating" />
</div>

<div class="card">
  <!-- Music Video with playback controls -->
  <div class="media-container">
    <video id="musicVideo" class="music-video active" src="images/page2music.mp4" autoplay loop playsinline></video>
    <div class="music-info">
      <div>Now Playing: Our Song</div>
      <div class="progress-bar">
        <div class="progress" id="musicProgress"></div>
      </div>
    </div>
    <button id="soundToggle" class="sound-control">üîá</button>
  </div>

  <div class="media-container" id="mediaContainer">
    <img src="images/april11.5.jpeg" class="active" alt="Memory 1">
    <img src="images/feb6.5.jpeg" alt="Memory 2">
    <img src="images/feb6.6.jpeg" alt="Memory 3">
    <img src="images/feb9.3.jpeg" alt="Memory 4">
    <img src="images/feb9.16.jpeg" alt="Memory 5">
    <img src="images/feb9.19.jpeg" alt="Memory 6">
    <video src="images/feb14.12.mp4" loop playsinline></video>
    <img src="images/march22.4.jpeg" alt="Memory 8">
    <img src="images/march23.5.jpeg" alt="Memory 9">
    <img src="images/feb6.2.jpeg" alt="Memory 10">
  </div>

  <div class="card-text">
    <p>
      I will never understand why you didn't have much friends because I don't know anyone from our friend group that has a negative opinion on you.
      You are extremely loved and that is because you are very loving and you have a great heart. You have amassed a great number of friends and supporters.
      You have not only created a friend group, you have created a family that will always fight for you and will always put your best interest in heart.
      We all love you very much and when you were gone for a bit, we were all distraught by your absence.
      It is no secret that my family loves you so much, you are now a part of my family, and you are always welcome in our home.
      The time we spent in IKEA and in my home shows the love my family has for you. We are your family till the end of time.
    </p>
  </div>
</div>

<div class="letters-grid">
  <a href="page1.html"><img src="images/readletter.png" alt="Letter 1"></a>
  <a href="page2.html"><img src="images/readletter.png" alt="Letter 2"></a>
  <a href="page3.html"><img src="images/letter.png" alt="Letter 3"></a>
  <a href="page4.html"><img src="images/letter.png" alt="Letter 4"></a>
  <a href="page5.html"><img src="images/letter.png" alt="Letter 5"></a>
  <a href="page6.html"><img src="images/letter.png" alt="Letter 6"></a>
  <a href="page7.html"><img src="images/letter.png" alt="Letter 7"></a>
  <a href="page8.html"><img src="images/letter.png" alt="Letter 8"></a>
  <a href="page9.html"><img src="images/letter.png" alt="Letter 9"></a>
  <a href="page10.html"><img src="images/letter.png" alt="Letter 10"></a>
  <a href="page11.html"><img src="images/letter.png" alt="Letter 11"></a>
  <a href="page12.html"><img src="images/letter.png" alt="Letter 12"></a>
  <a href="page13.html"><img src="images/letter.png" alt="Letter 13"></a>
  <a href="page14.html"><img src="images/letter.png" alt="Letter 14"></a>
  <a href="page15.html"><img src="images/letter.png" alt="Letter 15"></a>
  <a href="page16.html"><img src="images/letter.png" alt="Letter 16"></a>
  <a href="page17.html"><img src="images/letter.png" alt="Letter 17"></a>
  <a href="page18.html"><img src="images/letter.png" alt="Letter 18"></a>
  <a href="page19.html"><img src="images/letter.png" alt="Letter 19"></a>
</div>

<footer>Made with love for Hayaty ‚ú®üíï</footer>

<script>
  // Music video playback with sound control
  const musicVideo = document.getElementById("musicVideo");
  const soundToggle = document.getElementById("soundToggle");
  const musicProgress = document.getElementById("musicProgress");
  
  // Initialize video with muted autoplay (required by browsers)
  musicVideo.muted = true;
  musicVideo.autoplay = true;
  
  // Try to play the video immediately (muted autoplay is allowed)
  musicVideo.play().catch(error => {
    console.log('Autoplay prevented:', error);
  });
  
  // Sound toggle functionality
  soundToggle.addEventListener('click', () => {
    musicVideo.muted = !musicVideo.muted;
    soundToggle.textContent = musicVideo.muted ? 'üîá' : 'üîä';
    
    // If unmuting, try to play in case it was blocked
    if (!musicVideo.muted) {
      musicVideo.play().catch(e => console.log('Playback failed:', e));
    }
  });
  
  // Update progress bar
  musicVideo.addEventListener('timeupdate', () => {
    const progress = (musicVideo.currentTime / musicVideo.duration) * 100;
    musicProgress.style.width = `${progress}%`;
  });
  
  // Enable sound on any user interaction
  function enableSound() {
    if (musicVideo.muted) {
      musicVideo.muted = false;
      soundToggle.textContent = 'üîä';
      musicVideo.play().catch(e => console.log('Playback failed:', e));
    }
  }
  
  // Set up interaction listeners
  document.addEventListener('click', enableSound);
  document.addEventListener('touchstart', enableSound);
  document.addEventListener('keydown', enableSound);
  
  // Joyce floating element with flowers
  const joyce = document.getElementById('joyce');
  const flowers = [];
  
  for (let i = 0; i < 40; i++) {
    const flower = document.createElement('div');
    flower.classList.add('flower');
    flower.style.top = `${Math.random() * 160 - 30}%`;
    flower.style.left = `${Math.random() * 160 - 30}%`;
    joyce.appendChild(flower);
    flowers.push(flower);
  }
  
  flowers.forEach((flower, i) => {
    const angle = (360 / flowers.length) * i;
    const orbitRadius = 80;
    const style = document.createElement('style');
    style.innerHTML = `@keyframes orbit-${i} {
      0% { transform: rotate(${angle}deg) translateX(${orbitRadius}px) rotate(-${angle}deg); }
      100% { transform: rotate(${angle + 360}deg) translateX(${orbitRadius}px) rotate(-${angle + 360}deg); }
    }`;
    document.head.appendChild(style);
    flower.style.animation = `orbit-${i} 6s linear infinite`;
  });
  
  // Joyce scale on scroll
  const isMobile = window.innerWidth <= 768;
  const initialScale = isMobile ? 0.7 : 1.8;
  const minScale = 0.4;
  
  window.addEventListener('scroll', () => {
    const scrollY = window.scrollY;
    const scale = Math.max(initialScale - scrollY / 600, minScale);
    joyce.style.transform = `translate(-50%, -50%) scale(${scale})`;
  });
  
  // Media Carousel
  const mediaItems = document.querySelectorAll("#mediaContainer img, #mediaContainer video");
  let current = 0;
  
  const indicator = document.createElement("div");
  indicator.style.position = "absolute";
  indicator.style.bottom = "10px";
  indicator.style.left = "50%";
  indicator.style.transform = "translateX(-50%)";
  indicator.style.background = "rgba(0,0,0,0.6)";
  indicator.style.color = "white";
  indicator.style.padding = "4px 10px";
  indicator.style.borderRadius = "10px";
  indicator.style.fontSize = "0.9em";
  indicator.style.zIndex = "2";
  document.getElementById("mediaContainer").appendChild(indicator);
  
  function updateMedia(index) {
    mediaItems.forEach((item, i) => {
      item.classList.remove("active");
      if (item.tagName === "VIDEO") {
        item.pause();
        item.currentTime = 0;
      }
    });
    mediaItems[index].classList.add("active");
    if (mediaItems[index].tagName === "VIDEO") {
      mediaItems[index].play().catch(e => console.log('Carousel video play failed:', e));
    }
    indicator.textContent = `${index + 1} / ${mediaItems.length}`;
  }
  
  updateMedia(current);
  
  // Auto-rotate carousel every 5 seconds
  setInterval(() => {
    current = (current + 1) % mediaItems.length;
    updateMedia(current);
  }, 5000);
  
  // Touch controls for carousel
  let startX = 0;
  let endX = 0;
  
  document.getElementById("mediaContainer").addEventListener("touchstart", e => {
    startX = e.changedTouches[0].screenX;
  });
  
  document.getElementById("mediaContainer").addEventListener("touchend", e => {
    endX = e.changedTouches[0].screenX;
    if (endX < startX - 30) {
      current = (current + 1) % mediaItems.length;
      updateMedia(current);
    } else if (endX > startX + 30) {
      current = (current - 1 + mediaItems.length) % mediaItems.length;
      updateMedia(current);
    }
  });
</script>

</body>
</html>
